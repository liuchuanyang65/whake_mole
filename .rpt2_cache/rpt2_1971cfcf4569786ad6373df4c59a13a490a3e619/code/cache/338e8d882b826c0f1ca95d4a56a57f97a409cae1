{
  "code": "import hole_config from \"./hole_config\";\r\nimport mouseC from \"./mouse\";\r\nimport hammerC from \"./hammer\";\r\nimport scoreC from \"./score\";\r\nexport default class game_mgr extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.mouse_prefab = null;\r\n        this.mouse_root = null;\r\n        this.hammer = null;\r\n        this.startGame = null;\r\n        this.score_prefab = null;\r\n        this.score_root = null;\r\n        this.all_score = null;\r\n        this.count_down = null;\r\n        this.canvas = null;\r\n        this.homeBack = null;\r\n    }\r\n    onAwake() {\r\n        game_mgr.instance = this;\r\n        Laya.timer.loop(1000, this, function () {\r\n        });\r\n    }\r\n    onEnable() {\r\n    }\r\n    onDisable() {\r\n    }\r\n    onUpdate() {\r\n    }\r\n    createMouses() {\r\n        var mouse = this.mouse_prefab.create();\r\n        this.mouse_root.addChild(mouse);\r\n        var hole_index = Math.random() * 9;\r\n        hole_index = Math.floor(hole_index);\r\n        mouse.x = hole_config.mouse_pos[hole_index].x;\r\n        mouse.y = hole_config.mouse_pos[hole_index].y;\r\n        var mouse_type = 1;\r\n        var timeStage = 5;\r\n        if (this.count_down.text > '60') {\r\n            mouse_type = Math.random() < 0.11 ? 2 : 1;\r\n            timeStage = 5;\r\n        }\r\n        else if (this.count_down.text > '30') {\r\n            mouse_type = Math.random() < 0.41 ? 2 : 1;\r\n            timeStage = 3;\r\n        }\r\n        else if (this.count_down.text > '1') {\r\n            mouse_type = Math.random() < 0.21 ? 2 : 1;\r\n            timeStage = 4;\r\n        }\r\n        console.log(mouse_type, timeStage);\r\n        mouse.getComponent(mouseC).showMouse(this, mouse_type, hole_index, timeStage);\r\n        var time = (2 + Math.random() * 2) * timeStage * 100;\r\n        time = Math.floor(time);\r\n        Laya.timer.once(time, this, this.createMouses);\r\n    }\r\n    mouseBeHited(mgr, type, index) {\r\n        var score = this.score_prefab.create();\r\n        this.score_root.addChild(score);\r\n        score.x = hole_config.score_pos[index].x;\r\n        score.y = hole_config.score_pos[index].y;\r\n        score.getComponent(scoreC).showScore(mgr, type, index);\r\n        this.hammer.x = hole_config.hammer_pos[index].x;\r\n        this.hammer.y = hole_config.hammer_pos[index].y;\r\n        this.hammer.getComponent(hammerC).showHammer();\r\n    }\r\n    showWhichBack(type = 1) {\r\n        console.log(this.homeBack);\r\n        if (type == 1) {\r\n            this.homeBack.visible = true;\r\n            this.canvas.visible = false;\r\n        }\r\n        else if (type == 2) {\r\n            this.homeBack.visible = false;\r\n            this.canvas.visible = true;\r\n            this.count_down.text = 90 + '';\r\n            this.all_score.text = 0 + '';\r\n            this.createMouses();\r\n            this.countDownEvent();\r\n        }\r\n    }\r\n    scoreCount(type) {\r\n        this.all_score.text = String(type == 1 ? Number(this.all_score.text) + 100 : Number(this.all_score.text) - 100);\r\n    }\r\n    countDownEvent() {\r\n        if (this.count_down.text >= '1') {\r\n            Laya.timer.once(1000, this, function () {\r\n                this.count_down.text = String(Number(this.count_down.text) - 1);\r\n                this.countDownEvent();\r\n            });\r\n        }\r\n        else {\r\n            Laya.timer.clearAll(this);\r\n            this.showWhichBack(1);\r\n        }\r\n    }\r\n    onStart() {\r\n        this.showWhichBack(1);\r\n    }\r\n}\r\n",
  "references": [
    "/Users/liuchuanyang/WeChatProjects/my_mouse/src/script/hole_config.ts",
    "/Users/liuchuanyang/WeChatProjects/my_mouse/src/script/mouse.ts",
    "/Users/liuchuanyang/WeChatProjects/my_mouse/src/script/hammer.ts",
    "/Users/liuchuanyang/WeChatProjects/my_mouse/src/script/score.ts"
  ]
}
