{
  "code": "import { gameData } from \"./gameData\";\r\nimport { WXCloud } from \"./WXCloud\";\r\nexport default class home_mgr extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.start_btn = null;\r\n        this.begin_btn = null;\r\n        this.desc_Img = null;\r\n        this.icon_Img = null;\r\n        this.name_text = null;\r\n        this.rate = 1;\r\n    }\r\n    Init(mgr) {\r\n        this.mgr = mgr;\r\n        this.DefaultState();\r\n        this.start_btn.on(Laya.Event.CLICK, this, this.OnClickStart);\r\n        this.begin_btn.on(Laya.Event.CLICK, this, this.OnClickBegin);\r\n        if (Laya.Browser.onMiniGame) {\r\n            this.rate = wx.getSystemInfoSync().windowWidth / 1080;\r\n            Laya.Browser.window.wx.getUserInfo({\r\n                success: function (res) {\r\n                    gameData.player.avatarUrl = res.userInfo.avatarUrl;\r\n                    gameData.player.nickName = res.userInfo.nickName;\r\n                    this.UpdatePlayerUI();\r\n                }.bind(this),\r\n                fail: function (res) {\r\n                    console.log(res);\r\n                    this.ShowWXButton();\r\n                }.bind(this),\r\n            });\r\n            WXCloud._instance.CallFunction(\"getUID\");\r\n        }\r\n    }\r\n    ShowWXButton() {\r\n        this.desc_Img.visible = false;\r\n        this.begin_btn.visible = false;\r\n        this.start_btn.visible = false;\r\n        var width = (wx.getSystemInfoSync().windowWidth - 178) / 2;\r\n        var height = wx.getSystemInfoSync().windowHeight * 0.7;\r\n        this.wxbutton = Laya.Browser.window.wx.createUserInfoButton({\r\n            type: 'image',\r\n            image: \"res/btn_souquan.png\",\r\n            style: {\r\n                left: width,\r\n                top: height,\r\n                width: 178,\r\n                height: 59,\r\n            }\r\n        });\r\n        this.wxbutton.onTap((res) => {\r\n            gameData.player.avatarUrl = res.userInfo.avatarUrl;\r\n            gameData.player.nickName = res.userInfo.nickName;\r\n            this.UpdatePlayerUI();\r\n            this.OnClickStart();\r\n        });\r\n    }\r\n    UpdatePlayerUI() {\r\n        if (Laya.Browser.onMiniGame) {\r\n            console.log(gameData.player.avatarUrl);\r\n            this.icon_Img.skin = gameData.player.avatarUrl;\r\n            this.name_text.text = gameData.player.nickName;\r\n        }\r\n    }\r\n    DefaultState() {\r\n        this.desc_Img.visible = false;\r\n        this.begin_btn.visible = false;\r\n        this.start_btn.visible = true;\r\n    }\r\n    OnClickStart() {\r\n        this.desc_Img.visible = true;\r\n        this.begin_btn.visible = true;\r\n        this.start_btn.visible = false;\r\n        if (this.wxbutton) {\r\n            this.wxbutton.destroy();\r\n        }\r\n    }\r\n    OnClickBegin() {\r\n        this.mgr.showWhichBack(2);\r\n        this.DefaultState();\r\n    }\r\n}\r\n",
  "references": [
    "C:/Users/dell/Desktop/my_mouse/src/script/game_mgr.ts",
    "C:/Users/dell/Desktop/my_mouse/src/script/gameData.ts",
    "C:/Users/dell/Desktop/my_mouse/src/script/WXCloud.ts"
  ]
}
