{
  "code": "import mouseC from \"./mouse\";\r\nimport hammerC from \"./hammer\";\r\nimport scoreC from \"./score\";\r\nimport { gameData } from \"./gameData\";\r\nimport over_mgr from \"./over_mgr\";\r\nimport home_mgr from \"./home_mgr\";\r\nexport default class game_mgr extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.mouse_prefab = null;\r\n        this.mouse_root = null;\r\n        this.hammer = null;\r\n        this.startGame = null;\r\n        this.score_prefab = null;\r\n        this.score_root = null;\r\n        this.all_score = null;\r\n        this.count_down = null;\r\n        this.point_list = null;\r\n        this.canvas = null;\r\n        this.homeBack = null;\r\n        this.overCanvas = null;\r\n        this.init = false;\r\n        this.score = 0;\r\n        this.time = 0;\r\n        this.roundTime = 10;\r\n        new gameData();\r\n    }\r\n    onAwake() {\r\n        if (!this.init) {\r\n            this.over_Ctrl = this.overCanvas.getComponent(over_mgr);\r\n            this.home_Ctrl = this.homeBack.getComponent(home_mgr);\r\n            this.home_Ctrl.Init(this);\r\n            if (this.point_list) {\r\n                var count = this.point_list.numChildren;\r\n                gameData.pointArray = [];\r\n                for (var i = 0; i < count; i++) {\r\n                    var item = this.point_list.getChildAt(i);\r\n                    var point = { x: item.x, y: item.y + 80 };\r\n                    gameData.pointArray.push(point);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    createMouses() {\r\n        var mouse = this.mouse_prefab.create();\r\n        this.mouse_root.addChild(mouse);\r\n        var hole_index = Math.random() * 9;\r\n        hole_index = Math.floor(hole_index);\r\n        mouse.x = gameData.pointArray[hole_index].x;\r\n        mouse.y = gameData.pointArray[hole_index].y;\r\n        var mouse_type = 1;\r\n        var timeStage = 5;\r\n        if (this.time > 60) {\r\n            mouse_type = Math.random() < 0.11 ? 2 : 1;\r\n            timeStage = 5;\r\n        }\r\n        else if (this.time > 30) {\r\n            mouse_type = Math.random() < 0.41 ? 2 : 1;\r\n            timeStage = 3;\r\n        }\r\n        else if (this.time > 1) {\r\n            mouse_type = Math.random() < 0.21 ? 2 : 1;\r\n            timeStage = 4;\r\n        }\r\n        mouse.getComponent(mouseC).showMouse(this, mouse_type, hole_index, timeStage);\r\n        var time = (2 + Math.random() * 2) * timeStage * 100;\r\n        time = Math.floor(time);\r\n        Laya.timer.once(time, this, this.createMouses);\r\n    }\r\n    mouseBeHited(mgr, type, index) {\r\n        var score = this.score_prefab.create();\r\n        this.score_root.addChild(score);\r\n        score.x = gameData.pointArray[index].x;\r\n        score.y = gameData.pointArray[index].y - 300;\r\n        score.getComponent(scoreC).showScore(mgr, type, index);\r\n        this.hammer.x = gameData.pointArray[index].x + 170;\r\n        this.hammer.y = gameData.pointArray[index].y - 100;\r\n        this.hammer.getComponent(hammerC).showHammer();\r\n    }\r\n    showWhichBack(type = 1) {\r\n        console.log(this.homeBack);\r\n        switch (type) {\r\n            case 1:\r\n                this.homeBack.visible = true;\r\n                this.canvas.visible = false;\r\n                this.overCanvas.visible = false;\r\n                break;\r\n            case 2:\r\n                this.homeBack.visible = false;\r\n                this.canvas.visible = true;\r\n                this.overCanvas.visible = false;\r\n                this.BeginGame();\r\n                break;\r\n            case 3:\r\n                this.homeBack.visible = false;\r\n                this.canvas.visible = false;\r\n                this.overCanvas.visible = true;\r\n                this.over_Ctrl.ShowOver(this);\r\n                break;\r\n            default:\r\n                this.homeBack.visible = true;\r\n                this.canvas.visible = false;\r\n                this.overCanvas.visible = false;\r\n                break;\r\n        }\r\n    }\r\n    BeginGame() {\r\n        this.time = this.roundTime;\r\n        this.score = 0;\r\n        this.count_down.text = this.time.toString();\r\n        this.all_score.text = this.score.toString();\r\n        this.createMouses();\r\n        this.countDownEvent();\r\n    }\r\n    scoreCount(type) {\r\n        this.score = (type == 1 ? this.score + 100 : this.score - 100);\r\n        this.all_score.text = this.score.toString();\r\n    }\r\n    countDownEvent() {\r\n        if (this.time >= 1) {\r\n            Laya.timer.once(1000, this, function () {\r\n                this.time--;\r\n                this.count_down.text = this.time.toString();\r\n                this.countDownEvent();\r\n            });\r\n        }\r\n        else {\r\n            Laya.timer.clearAll(this);\r\n            this.showWhichBack(3);\r\n        }\r\n    }\r\n    onStart() {\r\n        this.showWhichBack(1);\r\n    }\r\n}\r\n",
  "references": [
    "C:/Users/dell/Desktop/my_mouse/src/script/mouse.ts",
    "C:/Users/dell/Desktop/my_mouse/src/script/hammer.ts",
    "C:/Users/dell/Desktop/my_mouse/src/script/score.ts",
    "C:/Users/dell/Desktop/my_mouse/src/script/gameData.ts",
    "C:/Users/dell/Desktop/my_mouse/src/script/over_mgr.ts",
    "C:/Users/dell/Desktop/my_mouse/src/script/home_mgr.ts"
  ]
}
